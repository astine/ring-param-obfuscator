# ring-param-obfuscator

This is a Clojure Ring middleware to obfuscate HTTP parameter lists. This allows you to hide some of the details of your webapp's functioning from your users and from clever bots. Note that this is not a security application and I can't recommend using this to hide truly sensitive info.

## How it works

Clojure objects can be serialized and encrypted and then embedded into the query string of a link. The `wrap-obfuscate-params` middleware will detect this query string in the request object, decrypt and deserialize, and save the object in the request. If the serialized object is a map, it will be merged into the `:params` map generated by the `wrap-params` middleware (which is automatically applied.)

## Usage

`ring-param-obfuscator` is available from [Clojars](http://clojars.org/ring-middleware-format). You can add it in your `project.clj` with leiningen:

```clojure
[ring-param-obfuscator "0.1.0"]
```

Usage is straightforward:

```clojure
(ns my.app
  (:use [ring-param-obfuscator.core])
  ...)

(defn handler []
  ...)

(def app
     (wrap-obfuscate-params handler))
```

`wrap-obfuscate-params` takes two optional parameters:

  - `serialization-key` The encryption key for the obfuscator. Can be any string.
  - `obfuscated-parameter` The name of the parameter under which the encrypted object will be passed.

A call to `wrap-obfuscate-params` might look like this:

```clojure
(wrap-obfuscate-params handler "Fsd73jf2" "parameters")
```

To generate a link with obfuscated parameters, use the `serialize-link` function:

```clojure
(serialize-link "/foo/10" {:count 5 :name "Bob"})
```

The object `{:count 5 :name "Bob"}` will be serialized, encrypted, ad saved in link query string. Make certain to call this function from within a handler with the `wrap-obfuscate-params` applied or it may use the wrong key or parameter. If you must use it outside of a wrapped handler, bind the values such:

```clojure
(binding [*serialization-key* "key-value"
	  *obfuscated-parameter* "parameter-name"]
  (serialize-link "/foo/10" {:count 5 :name "Bob"})
```

## License

Copyright Â© 2013 Andrew Stine

Distributed under the Eclipse Public License, the same as Clojure.
